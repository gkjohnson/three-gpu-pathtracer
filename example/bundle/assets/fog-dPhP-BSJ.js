import"./modulepreload-polyfill-B5Qt9EMX.js";import{at as x,au as W,av as E,C as G,M as R,X as h,az as L,aA as v,a0 as A}from"./MaterialBase-byhyp4gt.js";import{O as z}from"./OrbitControls-BDTesZS8.js";import{g as H}from"./lil-gui.module.min-BH_YJbPT.js";import{g as O}from"./getScaledSettings-nzgggDDj.js";import{L as B}from"./LoaderElement-kg8-0xPv.js";import{F as j}from"./FogVolumeMaterial-BqNVcd_R.js";import{P as k}from"./PhysicalSpotLight-MA5Lj-8W.js";import{W as q}from"./WebGLPathTracer-DzRjmE4y.js";import{P as D}from"./PathTracingRenderer-N-9Lxrjr.js";import"./pcg.glsl-Dh-2-BlJ.js";import"./ggx_functions.glsl-BPuHaSoe.js";let n,a,P,r,d,c,t,l;const e={multipleImportanceSampling:!0,tiles:2,renderScale:1/window.devicePixelRatio,color:"#eeeeee",fog:!0,density:.01,lightIntensity:500,lightColor:"#ffffff",bounces:10,...O()};V();async function V(){l=new B,l.attach(document.body),a=new x({antialias:!0}),a.toneMapping=W,document.body.appendChild(a.domElement),n=new q(a),n.tiles.set(e.tiles,e.tiles);const F=window.innerWidth/window.innerHeight;r=new D(75,F,.025,500),r.position.set(0,1,6),P=new z(r,a.domElement),P.addEventListener("change",()=>{n.updateCamera()}),d=new E,d.background=new G(0),c=new j;const w=new R({color:10066329,roughness:1,metalness:0}),I=new h(new L(8,4.05,8),c),u=new h(new v(5,5,.1,40),w);u.position.y=-1.1,t=new k,t.position.set(0,1,0).multiplyScalar(3),t.angle=Math.PI/4.5,t.decay=2,t.penumbra=.15,t.distance=0,t.intensity=50,t.radius=.05;const m=new A;m.add(t);const f=10,C=2,T=new h(new L(.1,.1,2),w);for(let i=0;i<f;i++){const g=T.clone();g.position.x=-C*.5+C*i/(f-1),g.position.y=2,m.add(g)}d.add(I,u,m),n.setScene(d,r),l.setPercentage(1),o(),M(),window.addEventListener("resize",M);const p=new H,s=p.addFolder("Path Tracer");s.add(e,"bounces",1,20,1).onChange(o),s.add(e,"multipleImportanceSampling").onChange(o),s.add(e,"tiles",1,4,1).onChange(i=>{n.tiles.set(i,i)}),s.add(e,"renderScale",.1,1).onChange(o);const S=p.addFolder("Fog");S.addColor(e,"color").onChange(o),S.add(e,"density",0,1).onChange(o);const y=p.addFolder("Spot Light");y.add(e,"lightIntensity",0,1e3).onChange(o),y.addColor(e,"lightColor").onChange(o),b()}function o(){c.color.set(e.color).convertSRGBToLinear(),c.density=e.density,t.intensity=e.lightIntensity,t.color.set(e.lightColor),n.multipleImportanceSampling=e.multipleImportanceSampling,n.bounces=e.bounces,n.renderScale=e.renderScale,n.updateLights(),n.updateMaterials()}function M(){a.setSize(window.innerWidth,window.innerHeight),a.setPixelRatio(window.devicePixelRatio),r.aspect=window.innerWidth/window.innerHeight,r.updateProjectionMatrix(),n.updateCamera()}function b(){requestAnimationFrame(b),n.renderSample(),l.setSamples(n.samples,n.isCompiling)}
