import"./modulepreload-polyfill-B5Qt9EMX.js";import{aJ as P,at as x,au as F,a1 as R,av as v,E,ah as G,aA as k,M as I,C as w,X as A}from"./MaterialBase-byhyp4gt.js";import{O as W}from"./OrbitControls-BDTesZS8.js";import{H as T}from"./HDRLoader-uXUM045B.js";import{g as H}from"./lil-gui.module.min-BH_YJbPT.js";import{G as z}from"./GLTFLoader-BYq4k_JA.js";import{M as D}from"./meshopt_decoder.module-j6OW_3Rk.js";import{P as j}from"./ParallelMeshBVHWorker-DmJoIDz8.js";import{g as B}from"./getScaledSettings-nzgggDDj.js";import{L as O}from"./LoaderElement-kg8-0xPv.js";import{W as V}from"./WebGLPathTracer-DzRjmE4y.js";import"./BufferGeometryUtils-DMgFFDwZ.js";import"./pcg.glsl-Dh-2-BlJ.js";import"./PathTracingRenderer-N-9Lxrjr.js";import"./ggx_functions.glsl-BPuHaSoe.js";class y extends P{constructor(...a){super(...a),this.isCircular=!1}copy(a,g){return super.copy(a,g),this.isCircular=a.isCircular,this}}const _="https://raw.githubusercontent.com/gkjohnson/3d-demo-data/master/hdri/leadenhall_market_1k.hdr",X="https://raw.githubusercontent.com/gkjohnson/3d-demo-data/main/models/mercury-about-to-kill-argos/scene.glb",q="Model courtesy of Virtual Museums of MaÅ‚opolska";let t,s,u,n,i,c,p;const e={enabled:!0,isCircular:!1,intensity:2,color:"#ffffff",width:1,height:1,bounces:5,renderScale:1/window.devicePixelRatio,filterGlossyFactor:.5,tiles:1,multipleImportanceSampling:!0,...B()};U();async function U(){p=new O,p.attach(document.body),s=new x({antialias:!0}),s.toneMapping=F,document.body.appendChild(s.domElement),t=new V(s),t.tiles.set(e.tiles,e.tiles),t.setBVHWorker(new j),c=new R(75,window.innerWidth/window.innerHeight,.025,500),c.position.set(0,.6,2.65),u=new W(c,s.domElement),u.target.set(0,.33,-.08),u.addEventListener("change",()=>t.updateCamera()),u.update(),i=new v,i.environmentIntensity=.03,i.backgroundIntensity=.03;const[h,a]=await Promise.all([new T().loadAsync(_),new z().setMeshoptDecoder(D).loadAsync(X)]);h.mapping=E,i.background=h,i.environment=h;const g=new G;a.scene.traverse(r=>{r.material&&(r.material.map=null)}),a.scene.scale.setScalar(.01),a.scene.position.x=.05,a.scene.updateMatrixWorld(!0),g.setFromObject(a.scene),a.scene.position.y-=g.min.y,i.add(a.scene);const S=new k(3.5,3.5,.05,60),L=new I({color:new w(10066329),metalness:.2,roughness:.02}),f=new A(S,L);f.position.y=-.025,i.add(f),n=new y(new w(16777215),5,1,1),n.position.x=1.5,n.position.y=1,n.position.z=-.5,n.rotateZ(-Math.PI/4),n.rotateX(-Math.PI/2),n.isCircular=!1,i.add(n);const m=new y(new w(16711680),15,1.25,2.75);m.position.y=1.25,m.position.z=-1.5,m.rotateX(Math.PI),m.isCircular=!1,i.add(m),await t.setSceneAsync(i,c,{onProgress:r=>{p.setPercentage(r)}}),p.setCredits(q);const C=new H,d=C.addFolder("Path Tracer");d.add(e,"tiles",1,4,1).onChange(r=>{t.tiles.set(r,r)}),d.add(e,"filterGlossyFactor",0,1).onChange(o),d.add(e,"bounces",1,15,1).onChange(o),d.add(e,"renderScale",.1,1).onChange(o),d.add(e,"multipleImportanceSampling").onChange(o),d.close();const l=C.addFolder("Area Light");l.add(e,"enabled").name("enable").onChange(o),l.add(e,"isCircular").name("isCircular").onChange(o),l.add(e,"intensity",0,200).name("intensity").onChange(o),l.addColor(e,"color").name("color").onChange(o),l.add(e,"width",0,5).name("width").onChange(o),l.add(e,"height",0,5).name("height").onChange(o),o(),b(),window.addEventListener("resize",b),M()}function o(){n.isCircular=e.isCircular,n.intensity=e.intensity,n.width=e.width,n.height=e.height,n.color.set(e.color).convertSRGBToLinear(),n.visible=e.enabled,t.filterGlossyFactor=e.filterGlossyFactor,t.bounces=e.bounces,t.renderScale=e.renderScale,t.multipleImportanceSampling=e.multipleImportanceSampling,t.updateLights()}function b(){s.setSize(window.innerWidth,window.innerHeight),s.setPixelRatio(window.devicePixelRatio),c.aspect=window.innerWidth/window.innerHeight,c.updateProjectionMatrix(),t.updateCamera()}function M(){requestAnimationFrame(M),t.renderSample(),p.setSamples(t.samples,t.isCompiling)}
